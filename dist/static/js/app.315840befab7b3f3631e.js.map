{"version":3,"sources":["webpack:///static/js/app.315840befab7b3f3631e.js","webpack:///./src/components/ChatRoom.vue?21eb","webpack:///src/components/ChatRoom.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/ChatRoom.vue?f55e","webpack:///./src/App.vue?e4f1","webpack:///./src/router/index.js","webpack:///src/App.vue"],"names":["webpackJsonp","0QIv","module","__webpack_exports__","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_m","attrs","id","_l","item","userName","type","_s","message","on","click","$event","readMore","_e","src","directives","name","rawName","value","expression","progress","class","disable","accept","change","sendImage","keydown","_k","keyCode","sendMessage","userNameSet","maxlength","domProps","saveName","staticRenderFns","draggable","esExports","Ds4J","msgRef","firebase","database","ref","storageRef","storage","data","messages","upload","methods","setName","vm","document","querySelector","trim","getTime","now","Date","hours","getHours","minutes","getMinutes","e","shiftKey","length","preventDefault","push","timeStamp","file","target","files","fileName","Math","floor","metadata","contentType","progressBar","uploadTask","child","put","TaskEvent","STATE_CHANGED","snapshot","bytesTransferred","totalBytes","setAttribute","error","code","downloadURL","previousElementSibling","mounted","val","updated","querySelectorAll","forEach","offsetHeight","roomBody","scrollTop","scrollHeight","M93x","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_36ee4c46_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","__vue_styles__","Component","NHnr","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","RFZe","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1b1d2a11_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__","VPST","YaEn","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__","use","routes","path","component","bDub","exports","uaQU","xJD8"],"mappings":"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","file":"static/js/app.315840befab7b3f3631e.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"0QIv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"container\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"chatRoom\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBody\",\n    attrs: {\n      \"id\": \"js-roomBody\"\n    }\n  }, [_vm._l((_vm.messages), function(item) {\n    return [(item.userName != _vm.userName) ? [_c('div', {\n      staticClass: \"messageBox\"\n    }, [_c('div', {\n      staticClass: \"messageBox__content\"\n    }, [(item.type == 'text') ? _c('div', {\n      staticClass: \"messageBox__message\"\n    }, [_c('div', {\n      staticClass: \"messageBox__text\"\n    }, [_vm._v(_vm._s(item.message))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"messageBox__readMore\",\n      on: {\n        \"click\": function($event) {\n          _vm.readMore($event)\n        }\n      }\n    }, [_vm._v(\"顯示更多\")])]) : _vm._e(), _vm._v(\" \"), (item.type == 'image') ? _c('div', {\n      staticClass: \"messageBox__image\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.message\n      }\n    })]) : _vm._e()])])] : _vm._e(), _vm._v(\" \"), (item.userName == _vm.userName) ? [_c('div', {\n      staticClass: \"messageBox messageBox--self\"\n    }, [_c('div', {\n      staticClass: \"messageBox__content\"\n    }, [(item.type == 'text') ? _c('div', {\n      staticClass: \"messageBox__message\"\n    }, [_c('div', {\n      staticClass: \"messageBox__text\"\n    }, [_vm._v(_vm._s(item.message))])]) : _vm._e(), _vm._v(\" \"), (item.type == 'image') ? _c('div', {\n      staticClass: \"messageBox__image\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.message\n      }\n    })]) : _vm._e()])])] : _vm._e()]\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.upload),\n      expression: \"upload\"\n    }],\n    staticClass: \"messageBox messageBox--self\"\n  }, [_c('div', {\n    staticClass: \"messageBox__progress\"\n  }, [_c('div', {\n    staticClass: \"messageBox__progress--state\",\n    attrs: {\n      \"id\": \"js-progressBar\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"messageBox__progress--number\"\n  }, [_vm._v(_vm._s(_vm.progress))])])])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBottom\",\n    class: {\n      disable: !_vm.userName\n    }\n  }, [_c('div', {\n    staticClass: \"roomBottom__tools\"\n  }, [_c('div', {\n    staticClass: \"roomBottom__tools_upload\"\n  }, [_c('input', {\n    attrs: {\n      \"type\": \"file\",\n      \"accept\": \"image/*\"\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.sendImage($event)\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBottom__input\"\n  }, [_c('textarea', {\n    staticClass: \"roomBottom__input__textarea\",\n    class: {\n      disable: !_vm.userName\n    },\n    attrs: {\n      \"id\": \"js-message\"\n    },\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.sendMessage($event)\n      }\n    }\n  })])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userNameSet || _vm.userName == ''),\n      expression: \"userNameSet || userName == ''\"\n    }],\n    staticClass: \"modal\"\n  }, [_c('div', {\n    staticClass: \"modal__container\"\n  }, [_vm._m(1), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal__body\"\n  }, [_c('input', {\n    staticClass: \"userName\",\n    attrs: {\n      \"type\": \"text\",\n      \"id\": \"js-userName\",\n      \"maxlength\": \"6\"\n    },\n    domProps: {\n      \"value\": _vm.userName\n    },\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.saveName()\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.saveName()\n      }\n    }\n  }, [_vm._v(\"設定\")])]), _vm._v(\" \"), _c('footer', {\n    staticClass: \"modal__footer\"\n  })])])])\n}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"roomHead\"\n  }, [_c('div', {\n    staticClass: \"roomHead__topButtons\"\n  }, [_c('div', {\n    staticClass: \"roomHead__button close\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__button minimize\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__button zoom\"\n  })]), _vm._v(\" \"), _c('img', {\n    staticClass: \"roomHead__img\",\n    attrs: {\n      \"src\": \"https://lorempixel.com/50/50/\",\n      \"draggable\": \"false\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__title\"\n  }, [_vm._v(\"Hello There\")])])\n},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('header', {\n    staticClass: \"modal__header\"\n  }, [_c('h2', {\n    staticClass: \"view-title\"\n  }, [_vm._v(\"輸入名稱\")])])\n}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Ds4J\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// msgRef = firebase中的資料表/messages/，若沒有的會自動建立\nvar msgRef = firebase.database().ref('/messages/');\nvar storageRef = firebase.storage().ref('/images/');\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  // 指定此頁使用的name\n  name: 'ChatRoom',\n  // 資料位置，於html中可用{{}}渲染出來\n  data: function data() {\n    return {\n      userNameSet: false, // 姓名輸入框\n      userName: '', // 名稱\n      messages: [], // 訊息內容\n      upload: false, // 上傳進度框\n      progress: '' // 上傳進度%數\n    };\n  },\n\n  // 這個頁面的functions\n  methods: {\n    /** 彈出設定視窗 */\n    setName: function setName() {\n      var vm = this;\n      vm.userNameSet = true;\n    },\n\n    /** 儲存設定名稱 */\n    saveName: function saveName() {\n      // vue的mtthod中this是指export中這整塊的資料\n      var vm = this;\n      var userName = document.querySelector('#js-userName').value;\n      if (userName.trim() == '') {\n        return;\n      }\n      // 這裡的vm.userName(this.userName)就是data()裡面的userName\n      vm.userName = userName;\n      vm.userNameSet = false;\n    },\n\n    /** 取得時間 */\n    getTime: function getTime() {\n      var now = new Date();\n      var hours = now.getHours();\n      var minutes = now.getMinutes();\n      return (hours >= 12 ? \"下午\" : \"上午\") + ' ' + hours + ':' + (minutes < 10 ? '0' + minutes : minutes);\n    },\n\n    /** 傳送訊息 */\n    sendMessage: function sendMessage(e) {\n      var vm = this;\n      var userName = document.querySelector('#js-userName');\n      var message = document.querySelector('#js-message');\n      // 如果是按住shift則不傳送訊息(多行輸入)\n      if (e.shiftKey) {\n        return false;\n      }\n      // 如果輸入是空則不傳送訊息\n      if (message.value.length <= 1 && message.value.trim() == '') {\n        // 避免enter產生的空白換行\n        e.preventDefault();\n        return false;\n      }\n      // 對firebase的db做push，db只能接受json物件格式，若要用陣列要先轉字串來存\n      msgRef.push({\n        userName: userName.value,\n        type: 'text',\n        message: message.value,\n        // 取得時間，這裡的vm.getTime()就是method中的getTime\n        timeStamp: vm.getTime()\n      });\n      // 清空輸入欄位並避免enter產生的空白換行\n      message.value = '';\n      e.preventDefault();\n    },\n\n    /** 傳送圖片 */\n    sendImage: function sendImage(e) {\n      var vm = this;\n      var userName = document.querySelector('#js-userName');\n      // 取得上傳檔案的資料\n      var file = e.target.files[0];\n      var fileName = Math.floor(Date.now() / 1000) + ('_' + file.name);\n      var metadata = {\n        contentType: 'image/*'\n      };\n      // 取得HTML進度條元素\n      var progressBar = document.querySelector('#js-progressBar');\n      // 上傳資訊設定\n      var uploadTask = storageRef.child(fileName).put(file, metadata);\n      // 上傳狀態處理\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\n      /* 上傳進度 */\n      function (snapshot) {\n        var progress = Math.floor(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        if (progress < 100) {\n          // 開啟進度條\n          vm.upload = true;\n          vm.progress = progress + '%';\n          progressBar.setAttribute('style', 'width:' + progress + '%');\n        }\n      },\n      /* 錯誤處理 */\n      function (error) {\n        msgRef.child('bug/').push({\n          userName: userName.value,\n          type: 'image',\n          message: error.code,\n          timeStamp: vm.getTime()\n        });\n      },\n      /* 上傳結束處理 */\n      function () {\n        var downloadURL = uploadTask.snapshot.downloadURL;\n        msgRef.push({\n          userName: userName.value,\n          type: 'image',\n          message: downloadURL,\n          timeStamp: vm.getTime()\n        });\n        // 關閉進度條\n        vm.upload = false;\n      });\n    },\n\n    /** 顯示更多 */\n    readMore: function readMore(e) {\n      // 把內容高度限制取消\n      e.target.previousElementSibling.setAttribute('style', 'max-height: 100%;');\n      // 隱藏\"顯示更多\"按紐\n      e.target.setAttribute('style', 'display: none;');\n    }\n  },\n  // mounted是vue的生命週期之一，代表模板已編譯完成，已經取值準備渲染元件了\n  mounted: function mounted() {\n    var vm = this;\n    msgRef.on('value', function (snapshot) {\n      var val = snapshot.val();\n      vm.messages = val;\n    });\n  },\n\n  // update是vue的生命週期之一，在元件渲染完成後執行\n  updated: function updated() {\n    // 判斷內容高度超過300就隱藏起來，把\"顯示更多\"按紐打開\n    var messages = document.querySelectorAll('.messageBox__message');\n    messages.forEach(function (message) {\n      if (message.offsetHeight > 300) {\n        message.querySelector('.messageBox__readMore').setAttribute('style', 'display: block');\n      }\n    });\n    // 當畫面渲染完成，把聊天視窗滾到最底部(讀取最新消息)\n    var roomBody = document.querySelector('#js-roomBody');\n    roomBody.scrollTop = roomBody.scrollHeight;\n  }\n});\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_36ee4c46_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"VPST\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"uaQU\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_36ee4c46_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(\"YaEn\");\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */] }\n});\n\n/***/ }),\n\n/***/ \"RFZe\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__ = __webpack_require__(\"Ds4J\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1b1d2a11_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__ = __webpack_require__(\"0QIv\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"bDub\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1b1d2a11\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ChatRoom_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1b1d2a11_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_ChatRoom_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"VPST\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"/ocq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__ = __webpack_require__(\"RFZe\");\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'ChatRoom',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_ChatRoom__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n\n/***/ \"bDub\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"uaQU\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'app'\n});\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.315840befab7b3f3631e.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"container\"\n  }, [_c('div', {\n    staticClass: \"name\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"chatRoom\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBody\",\n    attrs: {\n      \"id\": \"js-roomBody\"\n    }\n  }, [_vm._l((_vm.messages), function(item) {\n    return [(item.userName != _vm.userName) ? [_c('div', {\n      staticClass: \"messageBox\"\n    }, [_c('div', {\n      staticClass: \"messageBox__content\"\n    }, [(item.type == 'text') ? _c('div', {\n      staticClass: \"messageBox__message\"\n    }, [_c('div', {\n      staticClass: \"messageBox__text\"\n    }, [_vm._v(_vm._s(item.message))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"messageBox__readMore\",\n      on: {\n        \"click\": function($event) {\n          _vm.readMore($event)\n        }\n      }\n    }, [_vm._v(\"顯示更多\")])]) : _vm._e(), _vm._v(\" \"), (item.type == 'image') ? _c('div', {\n      staticClass: \"messageBox__image\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.message\n      }\n    })]) : _vm._e()])])] : _vm._e(), _vm._v(\" \"), (item.userName == _vm.userName) ? [_c('div', {\n      staticClass: \"messageBox messageBox--self\"\n    }, [_c('div', {\n      staticClass: \"messageBox__content\"\n    }, [(item.type == 'text') ? _c('div', {\n      staticClass: \"messageBox__message\"\n    }, [_c('div', {\n      staticClass: \"messageBox__text\"\n    }, [_vm._v(_vm._s(item.message))])]) : _vm._e(), _vm._v(\" \"), (item.type == 'image') ? _c('div', {\n      staticClass: \"messageBox__image\"\n    }, [_c('img', {\n      attrs: {\n        \"src\": item.message\n      }\n    })]) : _vm._e()])])] : _vm._e()]\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.upload),\n      expression: \"upload\"\n    }],\n    staticClass: \"messageBox messageBox--self\"\n  }, [_c('div', {\n    staticClass: \"messageBox__progress\"\n  }, [_c('div', {\n    staticClass: \"messageBox__progress--state\",\n    attrs: {\n      \"id\": \"js-progressBar\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"messageBox__progress--number\"\n  }, [_vm._v(_vm._s(_vm.progress))])])])], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBottom\",\n    class: {\n      disable: !_vm.userName\n    }\n  }, [_c('div', {\n    staticClass: \"roomBottom__tools\"\n  }, [_c('div', {\n    staticClass: \"roomBottom__tools_upload\"\n  }, [_c('input', {\n    attrs: {\n      \"type\": \"file\",\n      \"accept\": \"image/*\"\n    },\n    on: {\n      \"change\": function($event) {\n        _vm.sendImage($event)\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomBottom__input\"\n  }, [_c('textarea', {\n    staticClass: \"roomBottom__input__textarea\",\n    class: {\n      disable: !_vm.userName\n    },\n    attrs: {\n      \"id\": \"js-message\"\n    },\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.sendMessage($event)\n      }\n    }\n  })])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.userNameSet || _vm.userName == ''),\n      expression: \"userNameSet || userName == ''\"\n    }],\n    staticClass: \"modal\"\n  }, [_c('div', {\n    staticClass: \"modal__container\"\n  }, [_vm._m(1), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal__body\"\n  }, [_c('input', {\n    staticClass: \"userName\",\n    attrs: {\n      \"type\": \"text\",\n      \"id\": \"js-userName\",\n      \"maxlength\": \"6\"\n    },\n    domProps: {\n      \"value\": _vm.userName\n    },\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.saveName()\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.saveName()\n      }\n    }\n  }, [_vm._v(\"設定\")])]), _vm._v(\" \"), _c('footer', {\n    staticClass: \"modal__footer\"\n  })])])])\n}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"roomHead\"\n  }, [_c('div', {\n    staticClass: \"roomHead__topButtons\"\n  }, [_c('div', {\n    staticClass: \"roomHead__button close\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__button minimize\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__button zoom\"\n  })]), _vm._v(\" \"), _c('img', {\n    staticClass: \"roomHead__img\",\n    attrs: {\n      \"src\": \"https://lorempixel.com/50/50/\",\n      \"draggable\": \"false\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"roomHead__title\"\n  }, [_vm._v(\"Hello There\")])])\n},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('header', {\n    staticClass: \"modal__header\"\n  }, [_c('h2', {\n    staticClass: \"view-title\"\n  }, [_vm._v(\"輸入名稱\")])])\n}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1b1d2a11\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChatRoom.vue\n// module id = 0QIv\n// module chunks = 0","<template>\n  <div class=\"container\" >\n    <!-- 區塊：name area -->\n    <div class=\"name\">\n      <!-- <h3>Name：{{ userName }}</h3> -->\n      <!-- 註解：使用@click來偵測click，觸發時執行method中的setName() -->\n      <!-- <div class=\"reset\" @click=\"setName()\">Reset Name</div> -->\n    </div>\n    <!-- 區塊：chat room -->\n    <div class=\"chatRoom\">\n      <!-- 區塊：head -->\n      <div class=\"roomHead\">\n        <div class=\"roomHead__topButtons\">\n          <div class=\"roomHead__button close\"></div>\n          <div class=\"roomHead__button minimize\"></div>\n          <div class=\"roomHead__button zoom\"></div>\n        </div>\n        <img src=\"https://lorempixel.com/50/50/\" class=\"roomHead__img\" draggable=\"false\">\n        <div class=\"roomHead__title\">Hello There</div>\n      </div>\n      <!-- 區塊：body -->\n      <div id=\"js-roomBody\" class=\"roomBody\">\n        <!-- 註解：使用template來當迴圈容器，或是判斷用的容器，當條件達成時產出template內容 -->\n        <template v-for=\"item in messages\">\n          <!-- other people -->\n          <template v-if=\"item.userName != userName\">\n            <div class=\"messageBox\">\n              <!-- <img src=\"https://lorempixel.com/40/40/\" class=\"messageBox__user\" draggable=\"false\"> -->\n              <div class=\"messageBox__content\">\n                <!-- 註解：Vue使用雙花括號{{}}來顯示script中data:的資料 -->\n                <!-- <div class=\"messageBox__name\">{{item.userName}}</div> -->\n                <div v-if=\"item.type == 'text'\" class=\"messageBox__message\">\n                  <div class=\"messageBox__text\">{{item.message}}</div>\n                  <div class=\"messageBox__readMore\" @click=\"readMore($event)\">顯示更多</div>\n                </div>\n                <div v-if=\"item.type == 'image'\" class=\"messageBox__image\"><img :src=\"item.message\"></div>\n              </div>\n              <!-- <div class=\"messageBox__time\">{{item.timeStamp}}</div> -->\n            </div>\n          </template>\n          <!-- 區塊：self -->\n          <template v-if=\"item.userName == userName\">\n            <div class=\"messageBox messageBox--self\">\n              <!-- <div class=\"messageBox__time\">{{item.timeStamp}}</div> -->\n              <div class=\"messageBox__content\">\n                <div v-if=\"item.type == 'text'\" class=\"messageBox__message\">\n                  <div class=\"messageBox__text\">{{item.message}}</div>\n                </div>\n                <div v-if=\"item.type == 'image'\" class=\"messageBox__image\"><img :src=\"item.message\"></div>\n              </div>\n            </div>\n          </template>\n        </template>\n        <!-- 區塊：上傳進度條 -->\n        <div v-show=\"upload\" class=\"messageBox messageBox--self\">\n          <div class=\"messageBox__progress\">\n            <div id=\"js-progressBar\" class=\"messageBox__progress--state\"></div>\n            <div class=\"messageBox__progress--number\">{{progress}}</div>\n          </div>\n        </div>\n      </div>\n      <!-- 區塊：bottom -->\n      <!-- 註解：使用:class來寫class是否顯示的判斷式{ class: 判斷式 } -->\n      <div class=\"roomBottom\" :class=\"{ disable: !userName }\">\n        <div class=\"roomBottom__tools\">\n          <div class=\"roomBottom__tools_upload\">\n            <input type=\"file\" accept=\"image/*\" @change=\"sendImage($event)\">\n            <!-- <img src=\"../assets/tools_file.png\"> -->\n          </div>\n        </div>\n        <div class=\"roomBottom__input\">\n          <!-- 若要再帶入原生js的event(e)到function中，必須使用$event當參數傳入 -->\n          <textarea id=\"js-message\" class=\"roomBottom__input__textarea\" :class=\"{ disable: !userName }\" @keydown.enter=\"sendMessage($event)\"></textarea>\n        </div>\n      </div>\n    </div>\n    <!-- 區塊：modal -->\n    <div v-show=\"userNameSet || userName == ''\" class=\"modal\">\n      <div class=\"modal__container\">\n        <header class=\"modal__header\">\n          <h2 class=\"view-title\">輸入名稱</h2>\n        </header>\n        <div class=\"modal__body\">\n          <!-- 註解：使用@keydown.enter來偵測keydown enter，觸發時執行method中的saveName() -->\n          <input type=\"text\" id=\"js-userName\" class=\"userName\" maxlength=\"6\" @keydown.enter=\"saveName()\" :value=\"userName\">\n          <div class=\"button\" @click=\"saveName()\">設定</div>\n        </div>\n        <footer class=\"modal__footer\"></footer>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// msgRef = firebase中的資料表/messages/，若沒有的會自動建立\nconst msgRef = firebase.database().ref('/messages/');\nconst storageRef = firebase.storage().ref('/images/');\nexport default {\n  // 指定此頁使用的name\n  name: 'ChatRoom',\n  // 資料位置，於html中可用{{}}渲染出來\n  data() {\n    return {\n      userNameSet: false, // 姓名輸入框\n      userName: '', // 名稱\n      messages: [], // 訊息內容\n      upload: false, // 上傳進度框\n      progress: '' // 上傳進度%數\n    }\n  },\n  // 這個頁面的functions\n  methods: {\n    /** 彈出設定視窗 */\n    setName() {\n      const vm = this;\n      vm.userNameSet = true;\n    },\n    /** 儲存設定名稱 */\n    saveName() {\n      // vue的mtthod中this是指export中這整塊的資料\n      const vm = this;\n      const userName = document.querySelector('#js-userName').value;\n      if (userName.trim() == '') { return; }\n      // 這裡的vm.userName(this.userName)就是data()裡面的userName\n      vm.userName = userName;\n      vm.userNameSet = false;\n    },\n    /** 取得時間 */\n    getTime() {\n      const now = new Date();\n      const hours = now.getHours();\n      const minutes = now.getMinutes();\n      return `${(hours >= 12) ? \"下午\" : \"上午\"} ${hours}:${(minutes < 10) ? '0' + minutes : minutes}`;\n    },\n    /** 傳送訊息 */\n    sendMessage(e) {\n      const vm = this;\n      const userName = document.querySelector('#js-userName');\n      let message = document.querySelector('#js-message');\n      // 如果是按住shift則不傳送訊息(多行輸入)\n      if (e.shiftKey) {\n        return false;\n      }\n      // 如果輸入是空則不傳送訊息\n      if (message.value.length <= 1 && message.value.trim() == '') {\n        // 避免enter產生的空白換行\n        e.preventDefault();\n        return false;\n      }\n      // 對firebase的db做push，db只能接受json物件格式，若要用陣列要先轉字串來存\n      msgRef.push({\n        userName: userName.value,\n        type: 'text',\n        message: message.value,\n        // 取得時間，這裡的vm.getTime()就是method中的getTime\n        timeStamp: vm.getTime()\n      })\n      // 清空輸入欄位並避免enter產生的空白換行\n      message.value = '';\n      e.preventDefault();\n    },\n    /** 傳送圖片 */\n    sendImage(e) {\n      const vm = this;\n      const userName = document.querySelector('#js-userName');\n      // 取得上傳檔案的資料\n      const file = e.target.files[0];\n      const fileName = Math.floor(Date.now() / 1000) + `_${file.name}`;\n      const metadata = {\n        contentType: 'image/*'\n      };\n      // 取得HTML進度條元素\n      let progressBar = document.querySelector('#js-progressBar');\n      // 上傳資訊設定\n      const uploadTask = storageRef.child(fileName).put(file, metadata);\n      // 上傳狀態處理\n      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\n        /* 上傳進度 */\n        function(snapshot) {\n          let progress = Math.floor((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n          if (progress < 100) {\n            // 開啟進度條\n            vm.upload = true;\n            vm.progress = `${progress}%`;\n            progressBar.setAttribute('style', `width:${progress}%`);\n          }\n        },\n        /* 錯誤處理 */\n        function(error) {\n          msgRef.child('bug/').push({\n            userName: userName.value,\n            type: 'image',\n            message: error.code,\n            timeStamp: vm.getTime()\n          })\n        },\n        /* 上傳結束處理 */\n        function() {\n          var downloadURL = uploadTask.snapshot.downloadURL;\n          msgRef.push({\n            userName: userName.value,\n            type: 'image',\n            message: downloadURL,\n            timeStamp: vm.getTime()\n          })\n          // 關閉進度條\n          vm.upload = false;\n        });\n    },\n    /** 顯示更多 */\n    readMore(e) {\n      // 把內容高度限制取消\n      e.target.previousElementSibling.setAttribute('style', 'max-height: 100%;')\n      // 隱藏\"顯示更多\"按紐\n      e.target.setAttribute('style', 'display: none;');\n    }\n  },\n  // mounted是vue的生命週期之一，代表模板已編譯完成，已經取值準備渲染元件了\n  mounted() {\n    const vm = this;\n    msgRef.on('value', function(snapshot) {\n      const val = snapshot.val();\n      vm.messages = val;\n    })\n  },\n  // update是vue的生命週期之一，在元件渲染完成後執行\n  updated() {\n    // 判斷內容高度超過300就隱藏起來，把\"顯示更多\"按紐打開\n    const messages = document.querySelectorAll('.messageBox__message');\n    messages.forEach((message) => {\n      if (message.offsetHeight > 300) {\n        message.querySelector('.messageBox__readMore').setAttribute('style', 'display: block');\n      }\n    })\n    // 當畫面渲染完成，把聊天視窗滾到最底部(讀取最新消息)\n    const roomBody = document.querySelector('#js-roomBody');\n    roomBody.scrollTop = roomBody.scrollHeight;\n  }\n}\n</script>\n\n<style scoped>\n* {\n  font-family: '微軟正黑體';\n  margin: auto;\n}\n.container {\n  padding: 10px 30px 0px 0px;\n}\n.name {\n  text-align: center;\n  margin: 10px 50px 10px 0px;\n  color: #333333;\n}\n.reset {\n  margin-top: 10px;\n  padding: 5px 10px;\n  border-radius: 10px;\n  font-weight: 600;\n  color: #333333;\n  background-color: #CCCCCC;\n  display: inline-block;\n  cursor: pointer;\n}\n.chatRoom {\n  border-radius: 5px;\n  max-width: 500px;\n  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);\n}\n\n/* Head */\n.roomHead {\n  width: 100%;\n  height: 85px;\n  border-radius: 5px 5px 0px 0px;\n  background-color: #2B364B;\n  position: relative;\n}\n.roomHead__topButtons {\n  padding: 2px 0px 5px 10px;\n  text-align: left;\n}\n.roomHead__button {\n  height: 10px;\n  width: 10px;\n  border-radius: 50%;\n  margin: 0px 1px;\n  display: inline-block;\n  cursor: pointer;\n}\n.close {\n  background-color: #FF625A;\n}\n.minimize {\n  background-color: #FFC02F;\n}\n.zoom {\n  background-color: #28CB40;\n}\n.roomHead__img {\n  width: 50px;\n  height: 50px;\n  margin: 0px 10px 6px 12px;\n  border-radius: 50%;\n  position: absolute;\n  cursor: pointer;\n}\n.roomHead__title {\n  font-size: 13px;\n  font-weight: 600;\n  color: #FFFFFF;\n  height: 80px;\n  margin: 5px 0px 0px 75px;\n  position: absolute;\n  cursor: pointer;\n}\n\n/* Body */\n.roomBody {\n  padding: 10px 0px;\n  background-color: #fff;\n  height: 60vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n.messageBox {\n  padding: 5px 10px;\n  position: relative;\n}\n.messageBox__user {\n  height: 40px;\n  width: 40px;\n  border-radius: 50%;\n  vertical-align: top;\n  display: inline-block;\n  cursor: pointer;\n}\n.messageBox__content {\n  max-width: 70%;\n  display: inline-block;\n}\n.messageBox__name {\n  margin: 5px 0px 5px 5px;\n  font-size: 13px;\n  color: #727C8A;\n  vertical-align: top;\n  cursor: pointer;\n}\n.messageBox__message {\n  margin: 5px 0px 5px 5px;\n  font-size: 12px;\n  color: #35393D;\n  letter-spacing: 0.6px;\n  background-color: #E3E8EB;\n  border-radius: 12px;\n  line-height: 1.5;\n  text-align: left;\n  word-break: break-all;\n  /*：與html的<pre></pre>同效果，可以使textarea的換行元素正常顯示 */\n  white-space: pre-line;\n}\n.messageBox__text {\n  padding: 8px 10px 9px 11px;\n  max-height: 300px;\n  overflow: hidden;\n}\n.messageBox__readMore {\n  border-top: 1px solid #D9DBDD;\n  margin-top: 6px;\n  padding: 6px 13px 10px 13px;\n  left: 0;\n  right: 0;\n  cursor: pointer;\n  display: none;\n}\n.messageBox__image {\n  margin: 5px 25px 5px 5px;\n}\n.messageBox__image img {\n  border-radius: 5px;\n  max-width: 100%;\n  max-height: 335px;\n}\n.messageBox__time {\n  transform: scale(0.7);\n  color: #ACB0B8;\n  vertical-align: bottom;\n  margin: 0px 0px 5px -12px;\n  display: inline-block;\n}\n.messageBox__progress {\n  width: 25%;\n  margin-right: 60px;\n  border-radius: 5px;\n  background-color: #D4D9E1;\n  height: 6px;\n}\n.messageBox__progress--state {\n  background-color: #00CE00;\n  height: 6px;\n  width: 10%;\n  border-radius: 5px;\n  float: right;\n}\n.messageBox__progress--number {\n  position: absolute;\n  top: 0;\n  right: 0;\n  font-size: 12px;\n  color: #B7B7B7;\n  margin-right: 35px;\n}\n.messageBox--self {\n  text-align: right;\n}\n.messageBox--self .messageBox__message {\n  background-color: #AFF47E;\n  margin-right: 25px;\n}\n.messageBox--self .messageBox__message__text {\n  padding: 8px 10px 9px 11px;\n  max-height: 100%;\n  overflow: unset;\n}\n.messageBox--self .messageBox__time {\n  margin: 0px -16px 5px 0px;\n}\n\n/* Bottom */\n.roomBottom {\n  bottom: 0px;\n  border-radius: 0px 0px 5px 5px;\n  background-color: #FFFFFF;\n}\n.roomBottom__tools {\n  border-top: solid 1px #E7E7E7;\n  border-bottom: solid 2px #E7E7E7;\n  background-color: #F6F6F6;\n  height: 30px;\n  padding: 0px 5px;\n}\n.roomBottom__tools_upload {\n  height: 20px;\n  margin: 5px;\n  padding: 1px;\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n}\n.roomBottom__tools_upload:hover {\n  border: solid 1px #DCDCDC;\n}\n.roomBottom__tools_upload input {\n  width: 100%;\n  height: 100%;\n  left: 0;\n  right: 0;\n  opacity: 0;\n  position: absolute;\n  cursor: pointer;\n  /* 讓input file可以支援pointer要加pl100% */\n  padding-left: 100%;\n}\n.roomBottom__tools_upload img {\n  height: 100%;\n}\n.roomBottom__input {\n  padding: 10px 10px 5px 10px;\n}\n.roomBottom__input__textarea {\n  width: 100%;\n  height: 60px;\n  border: none;\n  resize: none;\n  outline: none;\n}\n\n/* status */\n.disable {\n  pointer-events: none;\n  background-color: #ebebeb;\n}\n\n/* modal */\n.modal {\n  z-index: 3;\n  padding: 50px 0px;\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.4);\n  animation: opac 0.8s;\n  letter-spacing: 2px;\n  text-align: unset;\n}\n.modal__container {\n  margin: auto;\n  position: relative;\n  padding: 10px;\n  outline: 0;\n  max-width: 300px;\n}\n.modal__header {\n  color: #fff;\n  background-color: #2B364B;\n  padding: 10px;\n  text-align: center;\n  border-radius: 5px 5px 0px 0px;\n}\n.modal__body {\n  background-color: #fff;\n  padding: 20px 50px;\n  text-align: center;\n}\n.modal__body p {\n  text-align: left;\n  line-height: 24px;\n}\n.modal__img {\n  max-width: 100%;\n}\n.modal__footer {\n  color: #fff;\n  background-color: #2B364B;\n  height: 8px;\n  border-radius: 0px 0px 5px 5px;\n}\n\n/* name set */\n.userName {\n  height: 30px;\n  font-size: 16px;\n  margin-bottom: 10px;\n  border: solid 1px #cbcbcb;\n  width: 70%;\n  text-align: center;\n  display: inline-block;\n}\n.button {\n  font-size: 14px;\n  color: #FFFFFF;\n  background-color: #2B364B;\n  padding: 10px 20px;\n  display: inline-block;\n  cursor: pointer;\n}\n\n/* media */\n\n@media screen and (max-width: 425px) {\n  .messageBox__content {\n    max-width: 60%;\n  }\n}\n\n@media screen and (max-width: 385px) {\n  .messageBox__content {\n    max-width: 50%;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChatRoom.vue?28ce5042","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-36ee4c46\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36ee4c46\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 0","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b1d2a11\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatRoom.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatRoom.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b1d2a11\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatRoom.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1b1d2a11\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChatRoom.vue\n// module id = RFZe\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-36ee4c46\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = VPST\n// module chunks = 0","import Vue from 'vue'\nimport Router from 'vue-router'\nimport ChatRoom from '@/components/ChatRoom'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'ChatRoom',\n      component: ChatRoom\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue?08590f04"],"sourceRoot":""}